could you edit the stylle.css file to make it fit ?Looking at your screenshot, I can see the issue clearly - the "Work-Energy Connection" subsection is cut off at the bottom. The table shows only partially, and "Chapter 5: Using Newton's Laws" appears immediately below without showing the rest of the Dynamics chapter content.
                                                                                                                                                                                                                                                    The problem is that the fix I provided earlier isn't working because maxHeight is still being constrained. Let me provide a more robust solution by updating the toggle methods to remove the height constraint entirely for chapters with subsections:The issue is that the maxHeight calculation is still happening after a delay, which overrides the "none" value. The simpler solution I've provided now:
1. Sets maxHeight: none for chapters with subsections (removing all height constraints)
2. Removes the setTimeout callbacks that were recalculating and constraining the height
3. Keeps normal maxHeight calculation for chapters without subsections
 However, there might also be an issue with the CSS. Let's also check if we need to update the CSS to ensure proper overflow handling. Could you add this to your style.css:

/* Fix for chapters with subsections */
.chapter.active .chapter-content {
    overflow: visible !important;
}

/* Ensure subsections don't have overflow issues */
.subsection.active .subsection-content {
    overflow: visible !important;
}

If this still doesn't work, the issue might be in how the content is structured in your HTML files. Make sure that in your dynamics.html file, you remove the <script> and <style> tags at the bottom (as they're now handled by the main application files).
                                                                                                                                                                                                                                                            Try these changes and let me know if the issue persists. If it does, we may need to look at the actual HTML structure of your dynamics chapter to see if there's something else constraining the height.

Looking at your CSS file, I can see the issue. The problem is with the transition and max-height properties for expanded content. Let me update the CSS to fix the cutting off issue:
Fixed Physics Formula Collection CSS


The key changes I made to fix the cutting off issue:

Removed height constraints for active chapters:
Added max-height: none !important when chapters are active
                                  Added overflow: visible !important to ensure all content shows
                                                                     Removed the transition when active for immediate display
                                                                     Same fix for subsections:
                                                                     Applied the same approach to subsection content
                                                                     Ensures nested content isn't constrained
Alternative animation approach:
Added .animating class option if you want to keep smooth animations
Uses a very large max-height (10000px for chapters, 5000px for subsections) instead of calculating exact heights

                                                                            The main issue was that the CSS was using overflow: hidden with calculated max-height values, which could be incorrect for dynamic content with subsections. Now when a chapter or subsection is active, it completely removes the height constraint and shows all content.

This should fix the cutting off issue you're experiencing with the Work-Energy Connection subsection and any other long content sections.

make sure the main includes chapters in the directory that dont have subchapters too,

Looking at your main.js file, I can see that the toggleChapter method already handles chapters both with and without subsections. The issue is that it's using a fixed max-height for chapters with subsections which might still cause cutoff. Let me update the JavaScript to better handle the expansion:
Fixed Physics Formula Collection CSS
Text

Now let me also update the JavaScript to properly detect and handle chapters with subsections:
Drafting artifact...



    /* ============================================= */
    /*          MAIN LAYOUT & COMPONENT STYLES       */
    /* ============================================= */
    /* This file uses the color variables defined in themes.css */

    /* --- General Layout --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    background: var(--bg-main); /* THEME */
    padding: 20px;
    color: var(--text-primary); /* THEME */
    transition: background-color 0.3s ease, color 0.3s ease;
}

.formula-collection {
    max-width: 900px;
    margin: 0 auto;
}

/* --- Main Header & Controls --- */
.main-header {
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    padding: 20px 30px;
    text-align: center;
    border-bottom: 4px solid var(--header-accent); /* THEME */
    border-radius: 10px 10px 0 0;
    margin: 0 auto;
    max-width: 900px;
}
.main-header h1 { font-size: 2.5em; font-weight: 300; margin-bottom: 10px; }
.main-header .subtitle { font-size: 1.1em; opacity: 0.9; }

.header-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
}

/* --- Theme Switcher --- */
.theme-switcher {
    display: flex;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 20px;
    padding: 4px;
}
.theme-btn {
    padding: 8px 16px;
    border: none;
    background: transparent;
    color: rgba(255, 255, 255, 0.7);
    border-radius: 16px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.3s ease;
}
.theme-btn.active {
    background: var(--bg-container); /* THEME */
    color: var(--button-active-bg); /* THEME */
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
}

/* --- View Controls (Expand/Collapse All) --- */
.view-controls {
    display: flex;
    gap: 10px;
}

.control-btn {
    padding: 8px 15px;
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    border: none;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9em;
    font-weight: 500;
}

.control-btn:hover {
    background: var(--header-accent); /* THEME */
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

/* --- Search Bar --- */
.search-container {
    flex-grow: 1;
    text-align: right;
    position: relative;
}
#search-input {
    width: 100%;
    max-width: 400px;
    padding: 10px 15px;
    font-size: 1em;
    border-radius: 20px;
    border: 2px solid transparent;
    background-color: rgba(0, 0, 0, 0.2);
    color: var(--header-text); /* THEME */
    transition: all 0.3s ease;
}
#search-input::placeholder { color: var(--header-text); opacity: 0.6; }
#search-input:focus {
    outline: none;
    background-color: rgba(0, 0, 0, 0.3);
    border-color: var(--header-accent); /* THEME */
}

.clear-search {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: var(--header-text);
    padding: 5px;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.clear-search:hover {
    opacity: 1;
}

/* --- Chapter & Formula Styling --- */
.chapter {
    margin-bottom: 20px;
    border: 1px solid var(--border-color); /* THEME */
    border-radius: 8px;
    overflow: hidden;
    background: var(--bg-container); /* THEME */
    box-shadow: 0 2px 5px var(--shadow-color); /* THEME */
    transition: opacity 0.3s ease;
}

.chapter-header {
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    padding: 15px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    border: none;
    text-align: left;
    font-size: 1em;
    transition: background-color 0.3s ease;
}
.chapter-header:hover { background: var(--header-accent); }
.chapter-header h2 { font-size: 1.3em; font-weight: 400; }
.toggle-icon { font-size: 1.5em; font-weight: bold; transition: transform 0.3s ease; }
.chapter.active .toggle-icon { transform: rotate(45deg); }

/* FIXED: Chapter content with proper expansion */
.chapter-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s ease-out, padding 0.5s ease-out;
    padding: 0 20px;
}

.chapter.active .chapter-content {
    max-height: none !important; /* Remove height constraint when active */
    overflow: visible !important; /* Ensure all content is visible */
    padding: 20px;
    border-top: 1px solid var(--border-color);
}

/* For chapters without subsections, allow smooth animation */
.chapter:not(.has-subsections).active .chapter-content {
    max-height: 5000px; /* Large value for smooth animation */
    transition: max-height 0.5s ease-out, padding 0.5s ease-out;
}

/* For chapters with subsections, remove animation for proper display */
.chapter.has-subsections.active .chapter-content {
    max-height: none !important;
    transition: none; /* No animation to prevent cutoff */
}

/* --- SUBSECTION STYLES --- */
.subsection-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    padding: 10px;
    background: var(--item-bg); /* THEME */
    border-radius: 5px;
    border: 1px solid var(--border-color);
}

.subsection-controls .control-btn {
    padding: 6px 12px;
    font-size: 0.85em;
}

.subsection {
    margin: 10px 0;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    background: var(--equation-bg); /* THEME */
    overflow: hidden;
}

.subsection-header {
    width: 100%;
    padding: 12px 15px;
    background: linear-gradient(135deg, var(--item-bg) 0%, var(--equation-bg) 100%); /* THEME */
    border: none;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-align: left;
    transition: background 0.3s ease;
}

.subsection-header:hover {
    background: var(--item-bg); /* THEME */
}

.subsection-header h3 {
    margin: 0;
    color: var(--item-header-text); /* THEME */
    font-size: 1.1em;
    font-weight: 500;
}

/* FIXED: Subsection content with proper expansion */
.subsection-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s ease-out;
    padding: 0 15px;
}

.subsection.active .subsection-content {
    max-height: none !important; /* Remove height constraint when active */
    overflow: visible !important; /* Ensure all content is visible */
    padding: 15px;
    transition: none; /* Remove transition for immediate display */
}

/* Alternative: Use a very large max-height for animation if needed */
.subsection.animating .subsection-content {
    max-height: 5000px !important; /* Large enough for subsection content */
    transition: max-height 0.5s ease-out;
}

.subsection.active .toggle-icon {
    transform: rotate(45deg);
}

.subsection .equation-table {
    margin-top: 10px;
}

.subsection h4 {
    color: var(--item-header-text); /* THEME */
    margin: 15px 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-color);
}

/* --- Formula Items --- */
.formula-item {
    margin-bottom: 25px;
    padding: 20px;
    background: var(--item-bg); /* THEME */
    border-radius: 8px;
    border-left: 4px solid var(--item-border-accent); /* THEME */
    transition: opacity 0.3s ease;
}
.formula-item h3 { color: var(--item-header-text); margin-bottom: 15px; font-size: 1.2em; font-weight: 500; }

.formula-equation {
    background: var(--equation-bg); /* THEME */
    border: 1px solid var(--border-color);
    border-radius: 5px;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 0 1px 3px var(--equation-shadow);
    overflow-x: auto;
    text-align: center;
    font-size: 1.1em; /* For MathML */
    position: relative;
}

.copy-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    background: var(--item-bg); /* THEME */
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    padding: 4px 8px;
    font-size: 12px;
    border-radius: 5px;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
}
.formula-equation:hover .copy-btn { opacity: 1; visibility: visible; }
.copy-btn:hover { background: var(--item-border-accent); }
.copy-btn.copied { background-color: #4ec9b0; color: white; opacity: 1; visibility: visible; }

/* --- Tables --- */
.equation-table {
    width: 100%;
    border-collapse: collapse;
    margin: 10px 0;
    background: var(--equation-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    overflow: hidden;
}

.equation-table th {
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    padding: 8px;
    text-align: left;
    font-weight: 600;
    font-size: 0.95em;
}

.equation-table td {
    padding: 8px;
    border-bottom: 1px solid var(--border-color);
}

.equation-table.compact td {
    padding: 6px 8px;
}

.equation-table tr:last-child td {
    border-bottom: none;
}

.equation-table .formula-equation {
    margin: 0;
    padding: 5px;
    background: transparent;
    border: none;
    box-shadow: none;
    display: inline-block;
}

/* --- Quick Reference Boxes --- */
.quick-reference {
    background: var(--item-bg); /* THEME */
    border-left: 3px solid var(--item-border-accent);
    padding: 15px;
    margin: 15px 0;
    border-radius: 5px;
}

.quick-reference h4 {
    color: var(--item-header-text); /* THEME */
    margin-bottom: 10px;
    margin-top: 0;
}

/* --- Example Problems --- */
.example-problem {
    background: var(--equation-bg); /* THEME */
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
}

.example-problem h4 {
    color: var(--item-header-text); /* THEME */
    margin-top: 0;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border-color);
}

.problem-statement {
    background: var(--item-bg); /* THEME */
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
}

.solution {
    padding: 10px;
}

.solution p {
    margin: 5px 0;
}

.answer {
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
    font-weight: 600;
}

/* --- Reference Card --- */
.reference-card {
    background: linear-gradient(135deg, var(--item-bg) 0%, var(--equation-bg) 100%);
    border: 2px solid var(--item-border-accent);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 8px var(--shadow-color);
}

.reference-card h4 {
    color: var(--item-header-text); /* THEME */
    margin-top: 0;
    margin-bottom: 10px;
}

.strategy-list, .mistakes-list {
    margin: 10px 0 20px 20px;
}

.strategy-list li, .mistakes-list li {
    margin: 8px 0;
    line-height: 1.4;
}

/* --- Simulation Info Grid --- */
.sim-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    margin: 15px 0;
}

.info-item {
    background: var(--item-bg); /* THEME */
    padding: 8px 12px;
    border-radius: 5px;
    border: 1px solid var(--border-color);
    font-size: 0.9em;
}

.info-item span {
    font-weight: 600;
    color: var(--item-header-text); /* THEME */
}

/* --- Action Buttons --- */
.action-btn {
    padding: 8px 16px;
    background: var(--header-bg); /* THEME */
    color: var(--header-text); /* THEME */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.3s ease;
}

.action-btn:hover {
    background: var(--header-accent); /* THEME */
    transform: translateY(-1px);
    box-shadow: 0 2px 5px var(--shadow-color);
}

/* --- Search, Plot & Utility Styling --- */
.highlight { background-color: var(--highlight-bg); color: var(--highlight-text); padding: 2px 4px; border-radius: 3px; }
.no-results-message { text-align: center; padding: 40px; font-size: 1.2em; color: var(--text-secondary); background: var(--bg-container); border-radius: 8px; border: 1px solid var(--border-color); }
.hidden { display: none; }
.derivation {
    background: var(--item-bg);
    border-left: 3px solid var(--item-border-accent);
    padding: 15px;
    margin: 15px 0;
    border-radius: 5px;
}
.derivation h4 { color: var(--item-header-text); margin-bottom: 10px; }
.derivation .step { margin-left: 10px; padding: 4px 0; }

/* --- Resizable Plot Window --- */
.plot-window {
    position: relative;
    height: 350px;
    min-height: 200px;
    max-height: 80vh;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    overflow: hidden;
    padding: 10px;
    background: var(--bg-container);
}
.resize-handle {
    position: absolute;
    bottom: 0; left: 0;
    width: 100%; height: 10px;
    cursor: ns-resize;
    display: flex;
    align-items: center;
    justify-content: center;
}
.resize-handle::after {
    content: '...';
    color: var(--border-color);
    font-size: 20px;
    line-height: 0;
    letter-spacing: 2px;
}

/* --- Interactive Plot Styles --- */
.interactive-plot { border-top: 2px solid var(--border-color); padding-top: 25px; }
.plot-controls { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; padding: 15px; background: var(--bg-container); border-radius: 5px; border: 1px solid var(--border-color); }
.control-group { display: flex; flex-direction: column; gap: 8px; }
.control-group label { font-weight: 500; color: var(--item-header-text); font-size: 0.9em; }
.control-group input[type="range"] { width: 160px; }

/* --- Status Bar --- */
.status-bar {
    background: var(--item-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    padding: 10px 15px;
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.status-action {
    padding: 5px 10px;
    background: var(--header-bg);
    color: var(--header-text);
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.9em;
}

/* --- Error Container --- */
.error-container {
    text-align: center;
    padding: 40px;
    background: var(--bg-container);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

/* --- Responsive Design --- */
@media (max-width: 768px) {
    .header-controls {
        flex-direction: column;
        gap: 10px;
    }

    .view-controls {
        width: 100%;
        justify-content: center;
    }

    .subsection-controls {
        flex-direction: column;
    }

    .subsection-controls .control-btn {
        width: 100%;
    }

    .sim-info-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
