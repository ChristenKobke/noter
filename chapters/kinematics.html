<!-- File: chapters/kinematics.html -->
<div class="chapter">
    <button class="chapter-header js-chapter-toggle">
        <h2>Chapter 1: Kinematics - Complete Reference</h2>
        <span class="toggle-icon">+</span>
    </button>
    <div class="chapter-content">

        <!-- Subsection Controls -->
        <div class="header-controls subsection-controls">
            <div class="view-controls">
                <button class="control-btn expand-all-sub" data-chapter="kinematics">⊕ Expand All Sections</button>
                <button class="control-btn collapse-all-sub" data-chapter="kinematics">⊖ Collapse All Sections</button>
            </div>
        </div>

        <!-- Subsection 1: 1D Motion -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>1D Motion (Linear Kinematics)</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>Basic Equations of Motion</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Quantity</th>
                        <th>Formula</th>
                        <th>When to Use</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Position</strong></td>
                        <td class="formula-equation" data-latex="x = x_0 + v_0t + \frac{1}{2}at^2">
                            <math><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mn>0</mn></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>a</mi><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                        <td>Finding position at time t</td>
                    </tr>
                    <tr>
                        <td><strong>Velocity</strong></td>
                        <td class="formula-equation" data-latex="v = v_0 + at">
                            <math><mi>v</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><mi>a</mi><mi>t</mi></math>
                        </td>
                        <td>Finding velocity at time t</td>
                    </tr>
                    <tr>
                        <td><strong>Velocity-Position</strong></td>
                        <td class="formula-equation" data-latex="v^2 = v_0^2 + 2a\Delta x">
                            <math><msup><mi>v</mi><mn>2</mn></msup><mo>=</mo><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><mo>+</mo><mn>2</mn><mi>a</mi><mi>Δ</mi><mi>x</mi></math>
                        </td>
                        <td>Time not needed/unknown</td>
                    </tr>
                    <tr>
                        <td><strong>Average Velocity</strong></td>
                        <td class="formula-equation" data-latex="\bar{v} = \frac{v_0 + v}{2} = \frac{\Delta x}{\Delta t}">
                            <math><mover><mi>v</mi><mo>̄</mo></mover><mo>=</mo><mfrac><mrow><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><mi>v</mi></mrow><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><mi>Δ</mi><mi>x</mi></mrow><mrow><mi>Δ</mi><mi>t</mi></mrow></mfrac></math>
                        </td>
                        <td>Constant acceleration only</td>
                    </tr>
                    <tr>
                        <td><strong>Displacement</strong></td>
                        <td class="formula-equation" data-latex="\Delta x = v_{avg}t = \frac{1}{2}(v_0 + v)t">
                            <math><mi>Δ</mi><mi>x</mi><mo>=</mo><msub><mi>v</mi><mi>avg</mi></msub><mi>t</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>(</mo><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><mi>v</mi><mo>)</mo><mi>t</mi></math>
                        </td>
                        <td>Alternative form</td>
                    </tr>
                    </tbody>
                </table>

                <h4>Special Cases</h4>
                <table class="equation-table compact">
                    <tr>
                        <td>Free Fall (Earth)</td>
                        <td class="formula-equation" data-latex="a = -g = -9.81 \text{ m/s}^2">
                            <math><mi>a</mi><mo>=</mo><mo>-</mo><mi>g</mi><mo>=</mo><mo>-</mo><mn>9.81</mn><mtext> m/s²</mtext></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Starting from Rest</td>
                        <td class="formula-equation" data-latex="v_0 = 0 \Rightarrow x = \frac{1}{2}at^2">
                            <math><msub><mi>v</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn><mo>⇒</mo><mi>x</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>a</mi><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Constant Velocity</td>
                        <td class="formula-equation" data-latex="a = 0 \Rightarrow x = x_0 + vt">
                            <math><mi>a</mi><mo>=</mo><mn>0</mn><mo>⇒</mo><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><mi>v</mi><mi>t</mi></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Max Height (vertical)</td>
                        <td class="formula-equation" data-latex="h_{max} = \frac{v_0^2}{2g}">
                            <math><msub><mi>h</mi><mi>max</mi></msub><mo>=</mo><mfrac><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><mrow><mn>2</mn><mi>g</mi></mrow></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Time to Max Height</td>
                        <td class="formula-equation" data-latex="t_{max} = \frac{v_0}{g}">
                            <math><msub><mi>t</mi><mi>max</mi></msub><mo>=</mo><mfrac><msub><mi>v</mi><mn>0</mn></msub><mi>g</mi></mfrac></math>
                        </td>
                    </tr>
                </table>

                <div class="quick-reference">
                    <h4>Graphical Interpretation:</h4>
                    <ul>
                        <li><strong>Position vs Time:</strong> Slope = velocity, Curvature = acceleration</li>
                        <li><strong>Velocity vs Time:</strong> Slope = acceleration, Area = displacement</li>
                        <li><strong>Acceleration vs Time:</strong> Area = change in velocity</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Subsection 2: Vectors & Components -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Vectors & Component Analysis</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>Vector Fundamentals</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Operation</th>
                        <th>2D Formula</th>
                        <th>3D Formula</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Magnitude</strong></td>
                        <td class="formula-equation" data-latex="|\vec{v}| = \sqrt{v_x^2 + v_y^2}">
                            <math><mo>|</mo><mover><mi>v</mi><mo>→</mo></mover><mo>|</mo><mo>=</mo><msqrt><msubsup><mi>v</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>v</mi><mi>y</mi><mn>2</mn></msubsup></msqrt></math>
                        </td>
                        <td class="formula-equation" data-latex="|\vec{v}| = \sqrt{v_x^2 + v_y^2 + v_z^2}">
                            <math><mo>|</mo><mover><mi>v</mi><mo>→</mo></mover><mo>|</mo><mo>=</mo><msqrt><msubsup><mi>v</mi><mi>x</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>v</mi><mi>y</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>v</mi><mi>z</mi><mn>2</mn></msubsup></msqrt></math>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Direction (2D)</strong></td>
                        <td class="formula-equation" data-latex="\theta = \tan^{-1}\left(\frac{v_y}{v_x}\right)">
                            <math><mi>θ</mi><mo>=</mo><msup><mo>tan</mo><mrow><mo>-</mo><mn>1</mn></mrow></msup><mfenced><mfrac><msub><mi>v</mi><mi>y</mi></msub><msub><mi>v</mi><mi>x</mi></msub></mfrac></mfenced></math>
                        </td>
                        <td>Use direction cosines in 3D</td>
                    </tr>
                    <tr>
                        <td><strong>Components</strong></td>
                        <td>
                            <div class="formula-equation" data-latex="v_x = v\cos\theta">
                                <math><msub><mi>v</mi><mi>x</mi></msub><mo>=</mo><mi>v</mi><mo>cos</mo><mi>θ</mi></math>
                            </div>
                            <div class="formula-equation" data-latex="v_y = v\sin\theta">
                                <math><msub><mi>v</mi><mi>y</mi></msub><mo>=</mo><mi>v</mi><mo>sin</mo><mi>θ</mi></math>
                            </div>
                        </td>
                        <td>Use spherical coordinates</td>
                    </tr>
                    <tr>
                        <td><strong>Vector Addition</strong></td>
                        <td class="formula-equation" data-latex="\vec{R} = \vec{A} + \vec{B}">
                            <math><mover><mi>R</mi><mo>→</mo></mover><mo>=</mo><mover><mi>A</mi><mo>→</mo></mover><mo>+</mo><mover><mi>B</mi><mo>→</mo></mover></math>
                        </td>
                        <td>Add components separately</td>
                    </tr>
                    <tr>
                        <td><strong>Dot Product</strong></td>
                        <td class="formula-equation" data-latex="\vec{A} \cdot \vec{B} = A_xB_x + A_yB_y">
                            <math><mover><mi>A</mi><mo>→</mo></mover><mo>·</mo><mover><mi>B</mi><mo>→</mo></mover><mo>=</mo><msub><mi>A</mi><mi>x</mi></msub><msub><mi>B</mi><mi>x</mi></msub><mo>+</mo><msub><mi>A</mi><mi>y</mi></msub><msub><mi>B</mi><mi>y</mi></msub></math>
                        </td>
                        <td class="formula-equation" data-latex="\vec{A} \cdot \vec{B} = AB\cos\theta">
                            <math><mover><mi>A</mi><mo>→</mo></mover><mo>·</mo><mover><mi>B</mi><mo>→</mo></mover><mo>=</mo><mi>A</mi><mi>B</mi><mo>cos</mo><mi>θ</mi></math>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Cross Product</strong></td>
                        <td>Magnitude: AB sin θ</td>
                        <td class="formula-equation" data-latex="\vec{A} \times \vec{B} = (A_yB_z - A_zB_y)\hat{i} + ...">
                            <math><mover><mi>A</mi><mo>→</mo></mover><mo>×</mo><mover><mi>B</mi><mo>→</mo></mover></math>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <h4>Unit Vectors</h4>
                <table class="equation-table compact">
                    <tr>
                        <td>Cartesian (2D)</td>
                        <td class="formula-equation" data-latex="\vec{v} = v_x\hat{i} + v_y\hat{j}">
                            <math><mover><mi>v</mi><mo>→</mo></mover><mo>=</mo><msub><mi>v</mi><mi>x</mi></msub><mover><mi>i</mi><mo>^</mo></mover><mo>+</mo><msub><mi>v</mi><mi>y</mi></msub><mover><mi>j</mi><mo>^</mo></mover></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Cartesian (3D)</td>
                        <td class="formula-equation" data-latex="\vec{v} = v_x\hat{i} + v_y\hat{j} + v_z\hat{k}">
                            <math><mover><mi>v</mi><mo>→</mo></mover><mo>=</mo><msub><mi>v</mi><mi>x</mi></msub><mover><mi>i</mi><mo>^</mo></mover><mo>+</mo><msub><mi>v</mi><mi>y</mi></msub><mover><mi>j</mi><mo>^</mo></mover><mo>+</mo><msub><mi>v</mi><mi>z</mi></msub><mover><mi>k</mi><mo>^</mo></mover></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Unit Vector</td>
                        <td class="formula-equation" data-latex="\hat{v} = \frac{\vec{v}}{|\vec{v}|}">
                            <math><mover><mi>v</mi><mo>^</mo></mover><mo>=</mo><mfrac><mover><mi>v</mi><mo>→</mo></mover><mrow><mo>|</mo><mover><mi>v</mi><mo>→</mo></mover><mo>|</mo></mrow></mfrac></math>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Subsection 3: 2D Motion -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>2D Motion (Projectile & Planar)</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>Projectile Motion Equations</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Component</th>
                        <th>Formula</th>
                        <th>Notes</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Horizontal Position</strong></td>
                        <td class="formula-equation" data-latex="x = x_0 + v_{0x}t = x_0 + v_0\cos\theta \cdot t">
                            <math><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>x</mi></mrow></msub><mi>t</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mn>0</mn></msub><mo>cos</mo><mi>θ</mi><mo>·</mo><mi>t</mi></math>
                        </td>
                        <td>No horizontal acceleration</td>
                    </tr>
                    <tr>
                        <td><strong>Vertical Position</strong></td>
                        <td class="formula-equation" data-latex="y = y_0 + v_{0y}t - \frac{1}{2}gt^2">
                            <math><mi>y</mi><mo>=</mo><msub><mi>y</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>y</mi></mrow></msub><mi>t</mi><mo>-</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>g</mi><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                        <td>Gravity acts downward</td>
                    </tr>
                    <tr>
                        <td><strong>Horizontal Velocity</strong></td>
                        <td class="formula-equation" data-latex="v_x = v_{0x} = v_0\cos\theta = \text{constant}">
                            <math><msub><mi>v</mi><mi>x</mi></msub><mo>=</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>x</mi></mrow></msub><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>cos</mo><mi>θ</mi><mo>=</mo><mtext>constant</mtext></math>
                        </td>
                        <td>No air resistance</td>
                    </tr>
                    <tr>
                        <td><strong>Vertical Velocity</strong></td>
                        <td class="formula-equation" data-latex="v_y = v_{0y} - gt = v_0\sin\theta - gt">
                            <math><msub><mi>v</mi><mi>y</mi></msub><mo>=</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>y</mi></mrow></msub><mo>-</mo><mi>g</mi><mi>t</mi><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>sin</mo><mi>θ</mi><mo>-</mo><mi>g</mi><mi>t</mi></math>
                        </td>
                        <td>Changes due to gravity</td>
                    </tr>
                    <tr>
                        <td><strong>Trajectory Equation</strong></td>
                        <td class="formula-equation" data-latex="y = x\tan\theta - \frac{gx^2}{2v_0^2\cos^2\theta}">
                            <math><mi>y</mi><mo>=</mo><mi>x</mi><mo>tan</mo><mi>θ</mi><mo>-</mo><mfrac><mrow><mi>g</mi><msup><mi>x</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><msup><mo>cos</mo><mn>2</mn></msup><mi>θ</mi></mrow></mfrac></math>
                        </td>
                        <td>Parabolic path</td>
                    </tr>
                    </tbody>
                </table>

                <h4>Key Results for Projectile Motion</h4>
                <table class="equation-table">
                    <tr>
                        <td>Maximum Height</td>
                        <td class="formula-equation" data-latex="H = \frac{v_0^2\sin^2\theta}{2g}">
                            <math><mi>H</mi><mo>=</mo><mfrac><mrow><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><msup><mo>sin</mo><mn>2</mn></msup><mi>θ</mi></mrow><mrow><mn>2</mn><mi>g</mi></mrow></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Time to Max Height</td>
                        <td class="formula-equation" data-latex="t_H = \frac{v_0\sin\theta}{g}">
                            <math><msub><mi>t</mi><mi>H</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>v</mi><mn>0</mn></msub><mo>sin</mo><mi>θ</mi></mrow><mi>g</mi></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Range (horizontal)</td>
                        <td class="formula-equation" data-latex="R = \frac{v_0^2\sin(2\theta)}{g}">
                            <math><mi>R</mi><mo>=</mo><mfrac><mrow><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><mo>sin</mo><mo>(</mo><mn>2</mn><mi>θ</mi><mo>)</mo></mrow><mi>g</mi></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Maximum Range</td>
                        <td class="formula-equation" data-latex="R_{max} = \frac{v_0^2}{g} \text{ at } \theta = 45°">
                            <math><msub><mi>R</mi><mi>max</mi></msub><mo>=</mo><mfrac><msubsup><mi>v</mi><mn>0</mn><mn>2</mn></msubsup><mi>g</mi></mfrac><mtext> at θ = 45°</mtext></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Time of Flight</td>
                        <td class="formula-equation" data-latex="T = \frac{2v_0\sin\theta}{g}">
                            <math><mi>T</mi><mo>=</mo><mfrac><mrow><mn>2</mn><msub><mi>v</mi><mn>0</mn></msub><mo>sin</mo><mi>θ</mi></mrow><mi>g</mi></mfrac></math>
                        </td>
                    </tr>
                </table>

                <div class="quick-reference">
                    <h4>Special Launch Angles:</h4>
                    <ul>
                        <li><strong>θ = 0°:</strong> Horizontal launch, no initial vertical velocity</li>
                        <li><strong>θ = 45°:</strong> Maximum range on level ground</li>
                        <li><strong>θ = 90°:</strong> Vertical launch, no horizontal displacement</li>
                        <li><strong>Complementary angles:</strong> Same range (e.g., 30° and 60°)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Subsection 4: 3D Motion -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>3D Motion & Spatial Kinematics</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>3D Position and Velocity</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Vector</th>
                        <th>Component Form</th>
                        <th>Differential Form</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Position</strong></td>
                        <td class="formula-equation" data-latex="\vec{r} = x\hat{i} + y\hat{j} + z\hat{k}">
                            <math><mover><mi>r</mi><mo>→</mo></mover><mo>=</mo><mi>x</mi><mover><mi>i</mi><mo>^</mo></mover><mo>+</mo><mi>y</mi><mover><mi>j</mi><mo>^</mo></mover><mo>+</mo><mi>z</mi><mover><mi>k</mi><mo>^</mo></mover></math>
                        </td>
                        <td>Function of time: r(t)</td>
                    </tr>
                    <tr>
                        <td><strong>Velocity</strong></td>
                        <td class="formula-equation" data-latex="\vec{v} = v_x\hat{i} + v_y\hat{j} + v_z\hat{k}">
                            <math><mover><mi>v</mi><mo>→</mo></mover><mo>=</mo><msub><mi>v</mi><mi>x</mi></msub><mover><mi>i</mi><mo>^</mo></mover><mo>+</mo><msub><mi>v</mi><mi>y</mi></msub><mover><mi>j</mi><mo>^</mo></mover><mo>+</mo><msub><mi>v</mi><mi>z</mi></msub><mover><mi>k</mi><mo>^</mo></mover></math>
                        </td>
                        <td class="formula-equation" data-latex="\vec{v} = \frac{d\vec{r}}{dt}">
                            <math><mover><mi>v</mi><mo>→</mo></mover><mo>=</mo><mfrac><mrow><mi>d</mi><mover><mi>r</mi><mo>→</mo></mover></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Acceleration</strong></td>
                        <td class="formula-equation" data-latex="\vec{a} = a_x\hat{i} + a_y\hat{j} + a_z\hat{k}">
                            <math><mover><mi>a</mi><mo>→</mo></mover><mo>=</mo><msub><mi>a</mi><mi>x</mi></msub><mover><mi>i</mi><mo>^</mo></mover><mo>+</mo><msub><mi>a</mi><mi>y</mi></msub><mover><mi>j</mi><mo>^</mo></mover><mo>+</mo><msub><mi>a</mi><mi>z</mi></msub><mover><mi>k</mi><mo>^</mo></mover></math>
                        </td>
                        <td class="formula-equation" data-latex="\vec{a} = \frac{d\vec{v}}{dt} = \frac{d^2\vec{r}}{dt^2}">
                            <math><mover><mi>a</mi><mo>→</mo></mover><mo>=</mo><mfrac><mrow><mi>d</mi><mover><mi>v</mi><mo>→</mo></mover></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><msup><mi>d</mi><mn>2</mn></msup><mover><mi>r</mi><mo>→</mo></mover></mrow><mrow><mi>d</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac></math>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <h4>3D Motion with Constant Acceleration</h4>
                <table class="equation-table compact">
                    <tr>
                        <td>x-component</td>
                        <td class="formula-equation" data-latex="x = x_0 + v_{0x}t + \frac{1}{2}a_x t^2">
                            <math><mi>x</mi><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>x</mi></mrow></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>a</mi><mi>x</mi></msub><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                    </tr>
                    <tr>
                        <td>y-component</td>
                        <td class="formula-equation" data-latex="y = y_0 + v_{0y}t + \frac{1}{2}a_y t^2">
                            <math><mi>y</mi><mo>=</mo><msub><mi>y</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>y</mi></mrow></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>a</mi><mi>y</mi></msub><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                    </tr>
                    <tr>
                        <td>z-component</td>
                        <td class="formula-equation" data-latex="z = z_0 + v_{0z}t + \frac{1}{2}a_z t^2">
                            <math><mi>z</mi><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>+</mo><msub><mi>v</mi><mrow><mn>0</mn><mi>z</mi></mrow></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>a</mi><mi>z</mi></msub><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                    </tr>
                </table>

                <h4>Coordinate Systems</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>System</th>
                        <th>Coordinates</th>
                        <th>Conversion to Cartesian</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Cylindrical</strong></td>
                        <td>(ρ, φ, z)</td>
                        <td>
                            x = ρ cos φ<br>
                            y = ρ sin φ<br>
                            z = z
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Spherical</strong></td>
                        <td>(r, θ, φ)</td>
                        <td>
                            x = r sin θ cos φ<br>
                            y = r sin θ sin φ<br>
                            z = r cos θ
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Subsection 5: Relative Motion -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Relative Motion & Reference Frames</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>Relative Motion Equations</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Quantity</th>
                        <th>Formula</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Relative Position</strong></td>
                        <td class="formula-equation" data-latex="\vec{r}_{AB} = \vec{r}_B - \vec{r}_A">
                            <math><msub><mover><mi>r</mi><mo>→</mo></mover><mi>AB</mi></msub><mo>=</mo><msub><mover><mi>r</mi><mo>→</mo></mover><mi>B</mi></msub><mo>-</mo><msub><mover><mi>r</mi><mo>→</mo></mover><mi>A</mi></msub></math>
                        </td>
                        <td>Position of B relative to A</td>
                    </tr>
                    <tr>
                        <td><strong>Relative Velocity</strong></td>
                        <td class="formula-equation" data-latex="\vec{v}_{AB} = \vec{v}_B - \vec{v}_A">
                            <math><msub><mover><mi>v</mi><mo>→</mo></mover><mi>AB</mi></msub><mo>=</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>B</mi></msub><mo>-</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>A</mi></msub></math>
                        </td>
                        <td>Velocity of B as seen by A</td>
                    </tr>
                    <tr>
                        <td><strong>Galilean Transform</strong></td>
                        <td class="formula-equation" data-latex="\vec{v}_{ground} = \vec{v}_{rel} + \vec{v}_{frame}">
                            <math><msub><mover><mi>v</mi><mo>→</mo></mover><mi>ground</mi></msub><mo>=</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>rel</mi></msub><mo>+</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>frame</mi></msub></math>
                        </td>
                        <td>Velocity addition</td>
                    </tr>
                    <tr>
                        <td><strong>River Crossing</strong></td>
                        <td class="formula-equation" data-latex="\vec{v}_{boat} = \vec{v}_{water} + \vec{v}_{current}">
                            <math><msub><mover><mi>v</mi><mo>→</mo></mover><mi>boat</mi></msub><mo>=</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>water</mi></msub><mo>+</mo><msub><mover><mi>v</mi><mo>→</mo></mover><mi>current</mi></msub></math>
                        </td>
                        <td>Ground velocity</td>
                    </tr>
                    </tbody>
                </table>

                <h4>Common Applications</h4>
                <table class="equation-table compact">
                    <tr>
                        <td>Airplane in wind</td>
                        <td>Ground speed = Air speed + Wind velocity</td>
                    </tr>
                    <tr>
                        <td>Collision approach</td>
                        <td>Closing speed = |v₁ - v₂|</td>
                    </tr>
                    <tr>
                        <td>Perpendicular crossing</td>
                        <td>Aim angle: sin θ = v_current/v_boat</td>
                    </tr>
                    <tr>
                        <td>Minimum crossing time</td>
                        <td>Head perpendicular to current</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Subsection 6: Circular & Rotational Motion -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Circular & Rotational Kinematics</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>Angular Quantities</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Quantity</th>
                        <th>Linear-Angular Relation</th>
                        <th>Units</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><strong>Arc Length</strong></td>
                        <td class="formula-equation" data-latex="s = r\theta">
                            <math><mi>s</mi><mo>=</mo><mi>r</mi><mi>θ</mi></math>
                        </td>
                        <td>m (θ in radians)</td>
                    </tr>
                    <tr>
                        <td><strong>Angular Velocity</strong></td>
                        <td class="formula-equation" data-latex="\omega = \frac{d\theta}{dt} = \frac{v}{r}">
                            <math><mi>ω</mi><mo>=</mo><mfrac><mrow><mi>d</mi><mi>θ</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mi>v</mi><mi>r</mi></mfrac></math>
                        </td>
                        <td>rad/s</td>
                    </tr>
                    <tr>
                        <td><strong>Angular Acceleration</strong></td>
                        <td class="formula-equation" data-latex="\alpha = \frac{d\omega}{dt} = \frac{a_t}{r}">
                            <math><mi>α</mi><mo>=</mo><mfrac><mrow><mi>d</mi><mi>ω</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><msub><mi>a</mi><mi>t</mi></msub><mi>r</mi></mfrac></math>
                        </td>
                        <td>rad/s²</td>
                    </tr>
                    <tr>
                        <td><strong>Period</strong></td>
                        <td class="formula-equation" data-latex="T = \frac{2\pi}{\omega} = \frac{2\pi r}{v}">
                            <math><mi>T</mi><mo>=</mo><mfrac><mrow><mn>2</mn><mi>π</mi></mrow><mi>ω</mi></mfrac><mo>=</mo><mfrac><mrow><mn>2</mn><mi>π</mi><mi>r</mi></mrow><mi>v</mi></mfrac></math>
                        </td>
                        <td>s</td>
                    </tr>
                    <tr>
                        <td><strong>Frequency</strong></td>
                        <td class="formula-equation" data-latex="f = \frac{1}{T} = \frac{\omega}{2\pi}">
                            <math><mi>f</mi><mo>=</mo><mfrac><mn>1</mn><mi>T</mi></mfrac><mo>=</mo><mfrac><mi>ω</mi><mrow><mn>2</mn><mi>π</mi></mrow></mfrac></math>
                        </td>
                        <td>Hz (s⁻¹)</td>
                    </tr>
                    </tbody>
                </table>

                <h4>Rotational Kinematic Equations (Constant α)</h4>
                <table class="equation-table">
                    <tr>
                        <td>Angular position</td>
                        <td class="formula-equation" data-latex="\theta = \theta_0 + \omega_0 t + \frac{1}{2}\alpha t^2">
                            <math><mi>θ</mi><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><msub><mi>ω</mi><mn>0</mn></msub><mi>t</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>α</mi><msup><mi>t</mi><mn>2</mn></msup></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Angular velocity</td>
                        <td class="formula-equation" data-latex="\omega = \omega_0 + \alpha t">
                            <math><mi>ω</mi><mo>=</mo><msub><mi>ω</mi><mn>0</mn></msub><mo>+</mo><mi>α</mi><mi>t</mi></math>
                        </td>
                    </tr>
                    <tr>
                        <td>Velocity-position</td>
                        <td class="formula-equation" data-latex="\omega^2 = \omega_0^2 + 2\alpha\Delta\theta">
                            <math><msup><mi>ω</mi><mn>2</mn></msup><mo>=</mo><msubsup><mi>ω</mi><mn>0</mn><mn>2</mn></msubsup><mo>+</mo><mn>2</mn><mi>α</mi><mi>Δ</mi><mi>θ</mi></math>
                        </td>
                    </tr>
                </table>

                <h4>Acceleration Components</h4>
                <table class="equation-table compact">
                    <tr>
                        <td>Centripetal (radial)</td>
                        <td class="formula-equation" data-latex="a_c = \frac{v^2}{r} = \omega^2 r">
                            <math><msub><mi>a</mi><mi>c</mi></msub><mo>=</mo><mfrac><msup><mi>v</mi><mn>2</mn></msup><mi>r</mi></mfrac><mo>=</mo><msup><mi>ω</mi><mn>2</mn></msup><mi>r</mi></math>
                        </td>
                        <td>Toward center</td>
                    </tr>
                    <tr>
                        <td>Tangential</td>
                        <td class="formula-equation" data-latex="a_t = r\alpha">
                            <math><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><mi>r</mi><mi>α</mi></math>
                        </td>
                        <td>Along velocity</td>
                    </tr>
                    <tr>
                        <td>Total acceleration</td>
                        <td class="formula-equation" data-latex="a = \sqrt{a_c^2 + a_t^2}">
                            <math><mi>a</mi><mo>=</mo><msqrt><msubsup><mi>a</mi><mi>c</mi><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>a</mi><mi>t</mi><mn>2</mn></msubsup></msqrt></math>
                        </td>
                        <td>Vector sum</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Subsection 7: Non-Uniform Acceleration -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Variable Acceleration & Calculus Methods</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <h4>General Relationships</h4>
                <table class="equation-table">
                    <thead>
                    <tr>
                        <th>Given</th>
                        <th>Find</th>
                        <th>Method</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>a(t)</td>
                        <td>v(t)</td>
                        <td class="formula-equation" data-latex="v(t) = v_0 + \int_0^t a(t')dt'">
                            <math><mi>v</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><msubsup><mo>∫</mo><mn>0</mn><mi>t</mi></msubsup><mi>a</mi><mo>(</mo><mi>t'</mi><mo>)</mo><mi>d</mi><mi>t'</mi></math>
                        </td>
                    </tr>
                    <tr>
                        <td>v(t)</td>
                        <td>x(t)</td>
                        <td class="formula-equation" data-latex="x(t) = x_0 + \int_0^t v(t')dt'">
                            <math><mi>x</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo>+</mo><msubsup><mo>∫</mo><mn>0</mn><mi>t</mi></msubsup><mi>v</mi><mo>(</mo><mi>t'</mi><mo>)</mo><mi>d</mi><mi>t'</mi></math>
                        </td>
                    </tr>
                    <tr>
                        <td>x(t)</td>
                        <td>v(t)</td>
                        <td class="formula-equation" data-latex="v(t) = \frac{dx}{dt}">
                            <math><mi>v</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>d</mi><mi>x</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></math>
                        </td>
                    </tr>
                    <tr>
                        <td>v(t)</td>
                        <td>a(t)</td>
                        <td class="formula-equation" data-latex="a(t) = \frac{dv}{dt}">
                            <math><mi>a</mi><mo>(</mo><mi>t</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>d</mi><mi>v</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></math>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <h4>Common Variable Acceleration Cases</h4>
                <table class="equation-table">
                    <tr>
                        <td>Linear drag</td>
                        <td class="formula-equation" data-latex="a = -bv">
                            <math><mi>a</mi><mo>=</mo><mo>-</mo><mi>b</mi><mi>v</mi></math>
                        </td>
                        <td>v(t) = v₀e⁻ᵇᵗ</td>
                    </tr>
                    <tr>
                        <td>Quadratic drag</td>
                        <td class="formula-equation" data-latex="a = -cv^2">
                            <math><mi>a</mi><mo>=</mo><mo>-</mo><mi>c</mi><msup><mi>v</mi><mn>2</mn></msup></math>
                        </td>
                        <td>Terminal velocity: v_t = √(mg/c)</td>
                    </tr>
                    <tr>
                        <td>Simple harmonic</td>
                        <td class="formula-equation" data-latex="a = -\omega^2 x">
                            <math><mi>a</mi><mo>=</mo><mo>-</mo><msup><mi>ω</mi><mn>2</mn></msup><mi>x</mi></math>
                        </td>
                        <td>x(t) = A cos(ωt + φ)</td>
                    </tr>
                    <tr>
                        <td>Time-dependent</td>
                        <td class="formula-equation" data-latex="a = f(t)">
                            <math><mi>a</mi><mo>=</mo><mi>f</mi><mo>(</mo><mi>t</mi><mo>)</mo></math>
                        </td>
                        <td>Integrate to find v(t), x(t)</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Subsection 8: Worked Examples -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Worked Examples</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <div class="example-problem">
                    <h4>Example 1: 2D Projectile Motion</h4>
                    <div class="problem-statement">
                        A projectile is launched at 30 m/s at an angle of 60° above horizontal from a cliff 50 m high. Find:
                        <ol>
                            <li>Maximum height above ground</li>
                            <li>Time to hit the ground</li>
                            <li>Horizontal range</li>
                        </ol>
                    </div>
                    <div class="solution">
                        <p><strong>Given:</strong> v₀ = 30 m/s, θ = 60°, h₀ = 50 m</p>
                        <p><strong>Components:</strong></p>
                        <p>v₀ₓ = 30 cos(60°) = 15 m/s</p>
                        <p>v₀ᵧ = 30 sin(60°) = 26.0 m/s</p>

                        <p><strong>1) Maximum height:</strong></p>
                        <p>Additional height: Δh = v₀ᵧ²/(2g) = (26.0)²/(2×9.81) = 34.4 m</p>
                        <p>Total height: H = 50 + 34.4 = 84.4 m</p>

                        <p><strong>2) Time to ground:</strong></p>
                        <p>y = 50 + 26.0t - 4.905t²= 0</p>
                        <p>Solving: t = 6.73 s</p>

                        <p><strong>3) Range:</strong></p>
                        <p>R = v₀ₓ × t = 15 × 6.73 = 101 m</p>

                        <p class="answer">Answers: H = 84.4 m, t = 6.73 s, R = 101 m</p>
                    </div>
                </div>

                <div class="example-problem">
                    <h4>Example 2: Relative Motion - River Crossing</h4>
                    <div class="problem-statement">
                        A boat can travel at 5 m/s in still water. It must cross a 100 m wide river with a 3 m/s current. Find:
                        <ol>
                            <li>Angle to head for perpendicular crossing</li>
                            <li>Time for perpendicular crossing</li>
                            <li>Time for minimum crossing time</li>
                        </ol>
                    </div>
                    <div class="solution">
                        <p><strong>Given:</strong> v_boat = 5 m/s, v_current = 3 m/s, width = 100 m</p>

                        <p><strong>1) Perpendicular crossing angle:</strong></p>
                        <p>sin θ = v_current/v_boat = 3/5 = 0.6</p>
                        <p>θ = 36.9° upstream</p>

                        <p><strong>2) Perpendicular crossing time:</strong></p>
                        <p>Effective velocity = √(5² - 3²) = 4 m/s</p>
                        <p>Time = 100/4 = 25 s</p>

                        <p><strong>3) Minimum time (head straight across):</strong></p>
                        <p>Time = 100/5 = 20 s</p>
                        <p>But drift downstream = 3 × 20 = 60 m</p>

                        <p class="answer">Answers: θ = 36.9°, t_perp = 25 s, t_min = 20 s</p>
                    </div>
                </div>

                <div class="example-problem">
                    <h4>Example 3: Circular Motion</h4>
                    <div class="problem-statement">
                        A particle moves in a circle of radius 2 m. Its angular position is given by θ(t) = 2t² + 3t radians. Find at t = 2 s:
                        <ol>
                            <li>Angular velocity and acceleration</li>
                            <li>Linear speed and tangential acceleration</li>
                            <li>Total acceleration magnitude</li>
                        </ol>
                    </div>
                    <div class="solution">
                        <p><strong>Given:</strong> r = 2 m, θ(t) = 2t² + 3t</p>

                        <p><strong>Angular quantities:</strong></p>
                        <p>ω = dθ/dt = 4t + 3</p>
                        <p>α = dω/dt = 4 rad/s²</p>

                        <p><strong>At t = 2 s:</strong></p>
                        <p>ω = 4(2) + 3 = 11 rad/s</p>
                        <p>v = rω = 2 × 11 = 22 m/s</p>
                        <p>aₜ = rα = 2 × 4 = 8 m/s²</p>
                        <p>aᶜ = ω²r = 11² × 2 = 242 m/s²</p>
                        <p>a_total = √(8² + 242²) = 242.1 m/s²</p>

                        <p class="answer">Answers: ω = 11 rad/s, α = 4 rad/s², v = 22 m/s, a = 242.1 m/s²</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subsection 9: Interactive Plot -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Interactive Visualization</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <div class="formula-item interactive-plot" data-plot-id="kinematics-1d-chartjs">
                    <h4>1D Motion Simulator</h4>
                    <p class="formula-description">Visualize position, velocity, and acceleration for motion with constant acceleration.</p>
                    <div class="plot-controls">
                        <div class="control-group">
                            <label>Initial Position (m): <span id="k-x0-val">0 m</span></label>
                            <input type="range" id="k-x0-slider" min="-50" max="50" value="0" step="5">
                        </div>
                        <div class="control-group">
                            <label>Initial Velocity (m/s): <span id="k-v0-val">10 m/s</span></label>
                            <input type="range" id="k-v0-slider" min="-30" max="30" value="10" step="2">
                        </div>
                        <div class="control-group">
                            <label>Acceleration (m/s²): <span id="k-acc-val">-2 m/s²</span></label>
                            <input type="range" id="k-acc-slider" min="-10" max="10" value="-2" step="0.5">
                        </div>
                    </div>
                    <div class="plot-window">
                        <canvas class="plot-canvas" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subsection 10: Quick Reference -->
        <div class="subsection">
            <button class="subsection-header js-subsection-toggle">
                <h3>Quick Reference & Problem-Solving</h3>
                <span class="toggle-icon">+</span>
            </button>
            <div class="subsection-content">
                <div class="reference-card">
                    <h4>Problem-Solving Strategy:</h4>
                    <ol class="strategy-list">
                        <li><strong>Identify the type of motion</strong> - 1D, 2D, 3D, circular, or relative</li>
                        <li><strong>Choose coordinate system</strong> - Origin and positive directions</li>
                        <li><strong>List known quantities</strong> - Initial conditions and constraints</li>
                        <li><strong>Select appropriate equations</strong> - Based on what's known/unknown</li>
                        <li><strong>Solve algebraically first</strong> - Then substitute numbers</li>
                        <li><strong>Check units and reasonableness</strong> - Does the answer make sense?</li>
                    </ol>

                    <h4>Key Concepts to Remember:</h4>
                    <ul class="mistakes-list">
                        <li>Displacement ≠ Distance (vector vs scalar)</li>
                        <li>Average velocity ≠ Average speed (except for straight-line motion)</li>
                        <li>Acceleration can be perpendicular to velocity (circular motion)</li>
                        <li>In projectile motion, horizontal and vertical are independent</li>
                        <li>Free fall acceleration is constant (g), regardless of mass</li>
                        <li>Vectors must be added component-wise, not as scalars</li>
                    </ul>

                    <h4>Quick Formula Selection Guide:</h4>
                    <table class="equation-table compact">
                        <thead>
                        <tr>
                            <th>If you know...</th>
                            <th>And need...</th>
                            <th>Use equation</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>v₀, a, t</td>
                            <td>x</td>
                            <td>x = x₀ + v₀t + ½at²</td>
                        </tr>
                        <tr>
                            <td>v₀, a, t</td>
                            <td>v</td>
                            <td>v = v₀ + at</td>
                        </tr>
                        <tr>
                            <td>v₀, v, a</td>
                            <td>x</td>
                            <td>v² = v₀² + 2aΔx</td>
                        </tr>
                        <tr>
                            <td>x, t (no a)</td>
                            <td>v_avg</td>
                            <td>v_avg = Δx/Δt</td>
                        </tr>
                        <tr>
                            <td>θ, v₀ (projectile)</td>
                            <td>Range</td>
                            <td>R = v₀²sin(2θ)/g</td>
                        </tr>
                        <tr>
                            <td>v, r (circular)</td>
                            <td>a_c</td>
                            <td>a_c = v²/r</td>
                        </tr>
                        </tbody>
                    </table>

                    <h4>Common Values:</h4>
                    <ul>
                        <li><strong>g (Earth):</strong> 9.81 m/s² ≈ 10 m/s² (for estimates)</li>
                        <li><strong>g (Moon):</strong> 1.62 m/s² (≈ g/6)</li>
                        <li><strong>1 radian:</strong> 57.3°</li>
                        <li><strong>1 revolution:</strong> 2π radians = 360°</li>
                        <li><strong>Terminal velocity (human):</strong> ~53 m/s (120 mph)</li>
                        <li><strong>Speed of sound (air):</strong> 343 m/s at 20°C</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Subsection Toggle Script -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Subsection toggles
        document.querySelectorAll('.js-subsection-toggle').forEach(button => {
            button.addEventListener('click', function() {
                const subsection = button.closest('.subsection');
                const content = subsection.querySelector('.subsection-content');
                subsection.classList.toggle('active');
                content.style.maxHeight = subsection.classList.contains('active')
                    ? content.scrollHeight + "px"
                    : null;
            });
        });

        // Expand all subsections
        document.querySelectorAll('.expand-all-sub').forEach(button => {
            button.addEventListener('click', function() {
                const chapter = button.closest('.chapter-content');
                chapter.querySelectorAll('.subsection').forEach(subsection => {
                    subsection.classList.add('active');
                    const content = subsection.querySelector('.subsection-content');
                    content.style.maxHeight = content.scrollHeight + "px";
                });
            });
        });

        // Collapse all subsections
        document.querySelectorAll('.collapse-all-sub').forEach(button => {
            button.addEventListener('click', function() {
                const chapter = button.closest('.chapter-content');
                chapter.querySelectorAll('.subsection').forEach(subsection => {
                    subsection.classList.remove('active');
                    const content = subsection.querySelector('.subsection-content');
                    content.style.maxHeight = null;
                });
            });
        });
    });
</script>